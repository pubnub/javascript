(function(){
PUBNUB.crypto=function(){var v=14,s=8,w=!1,y=function(b,f){var c="",e,q;if(f){e=b[15];if(16<e)throw"Decryption error: Maybe bad key";if(16==e)return"";for(q=0;q<16-e;q++)c+=String.fromCharCode(b[q])}else for(q=0;16>q;q++)c+=String.fromCharCode(b[q]);return c},t=function(b,f){var c=[],e;if(!f)try{b=unescape(encodeURIComponent(b))}catch(q){throw"Error on UTF-8 encode";}for(e=0;e<b.length;e++)c[e]=b.charCodeAt(e);return c},d=function(b,f){var c=12<=v?3:2,e=[],q=[],e=[],q=[],u=b.concat(f),p;e[0]=GibberishAES.Hash.MD5(u);
q=e[0];for(p=1;p<c;p++)e[p]=GibberishAES.Hash.MD5(e[p-1].concat(u)),q=q.concat(e[p]);e=q.slice(0,4*s);q=q.slice(4*s,4*s+16);return{key:e,iv:q}},m=function(b,f,c){f=G(f);var e=Math.ceil(b.length/16),q=[],u,p=[];for(u=0;u<e;u++){var n=q,m=u,t=b.slice(16*u,16*u+16),s=[],d=void 0,d=void 0;16>t.length&&(d=16-t.length,s=[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d]);for(d=0;d<t.length;d++)s[d]=t[d];n[m]=s}0===b.length%16&&q.push([16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]);for(u=0;u<q.length;u++)q[u]=0===u?B(q[u],
c):B(q[u],p[u-1]),p[u]=z(q[u],f);return p},K=function(b,f,c,e){f=G(f);var q=b.length/16,u=[],p,n=[],d="";for(p=0;p<q;p++)u.push(b.slice(16*p,16*(p+1)));for(p=u.length-1;0<=p;p--)n[p]=E(u[p],f),n[p]=0===p?B(n[p],c):B(n[p],u[p-1]);for(p=0;p<q-1;p++)d+=y(n[p]);var d=d+y(n[p],!0),m;if(e)m=d;else try{m=decodeURIComponent(escape(d))}catch(t){throw"Bad Key";}return m},z=function(b,f){w=!1;var c=C(b,f,0),e;for(e=1;e<v+1;e++)c=F(c),c=I(c),e<v&&(c=A(c)),c=C(c,f,e);return c},E=function(b,f){w=!0;var c=C(b,f,
v),e;for(e=v-1;-1<e;e--)c=I(c),c=F(c),c=C(c,f,e),0<e&&(c=A(c));return c},F=function(b){var f=w?S:J,c=[],e;for(e=0;16>e;e++)c[e]=f[b[e]];return c},I=function(b){var f=[],c=w?[0,13,10,7,4,1,14,11,8,5,2,15,12,9,6,3]:[0,5,10,15,4,9,14,3,8,13,2,7,12,1,6,11],e;for(e=0;16>e;e++)f[e]=b[c[e]];return f},A=function(b){var f=[],c;if(w)for(c=0;4>c;c++)f[4*c]=L[b[4*c]]^M[b[1+4*c]]^N[b[2+4*c]]^O[b[3+4*c]],f[1+4*c]=O[b[4*c]]^L[b[1+4*c]]^M[b[2+4*c]]^N[b[3+4*c]],f[2+4*c]=N[b[4*c]]^O[b[1+4*c]]^L[b[2+4*c]]^M[b[3+4*c]],
f[3+4*c]=M[b[4*c]]^N[b[1+4*c]]^O[b[2+4*c]]^L[b[3+4*c]];else for(c=0;4>c;c++)f[4*c]=P[b[4*c]]^Q[b[1+4*c]]^b[2+4*c]^b[3+4*c],f[1+4*c]=b[4*c]^P[b[1+4*c]]^Q[b[2+4*c]]^b[3+4*c],f[2+4*c]=b[4*c]^b[1+4*c]^P[b[2+4*c]]^Q[b[3+4*c]],f[3+4*c]=Q[b[4*c]]^b[1+4*c]^b[2+4*c]^P[b[3+4*c]];return f},C=function(b,f,c){var e=[],q;for(q=0;16>q;q++)e[q]=b[q]^f[c][q];return e},B=function(b,f){var c=[],e;for(e=0;16>e;e++)c[e]=b[e]^f[e];return c},G=function(b){var f=[],c=[],e,q,u=[];for(e=0;e<s;e++)q=[b[4*e],b[4*e+1],b[4*e+
2],b[4*e+3]],f[e]=q;for(e=s;e<4*(v+1);e++){f[e]=[];for(b=0;4>b;b++)c[b]=f[e-1][b];if(0===e%s){b=c[0];q=void 0;for(q=0;4>q;q++)c[q]=c[q+1];c[3]=b;c=H(c);c[0]^=T[e/s-1]}else 6<s&&4==e%s&&(c=H(c));for(b=0;4>b;b++)f[e][b]=f[e-s][b]^c[b]}for(e=0;e<v+1;e++)for(u[e]=[],c=0;4>c;c++)u[e].push(f[4*e+c][0],f[4*e+c][1],f[4*e+c][2],f[4*e+c][3]);return u},H=function(b){for(var f=0;4>f;f++)b[f]=J[b[f]];return b},x=function(b,f){var c=[];for(i=0;i<b.length;i+=f)c[i/f]=parseInt(b.substr(i,f),16);return c},D=function(b){for(var f=
[],c=0;256>c;c++){for(var e=f,q=c,u=b,p=c,n=void 0,d=void 0,n=d=0;8>n;n++)d=1==(p&1)?d^u:d,u=127<u?283^u<<1:u<<1,p>>>=1;e[q]=d}return f},J=x("637c777bf26b6fc53001672bfed7ab76ca82c97dfa5947f0add4a2af9ca472c0b7fd9326363ff7cc34a5e5f171d8311504c723c31896059a071280e2eb27b27509832c1a1b6e5aa0523bd6b329e32f8453d100ed20fcb15b6acbbe394a4c58cfd0efaafb434d338545f9027f503c9fa851a3408f929d38f5bcb6da2110fff3d2cd0c13ec5f974417c4a77e3d645d197360814fdc222a908846eeb814de5e0bdbe0323a0a4906245cc2d3ac629195e479e7c8376d8dd54ea96c56f4ea657aae08ba78252e1ca6b4c6e8dd741f4bbd8b8a703eb5664803f60e613557b986c11d9ee1f8981169d98e949b1e87e9ce5528df8ca1890dbfe6426841992d0fb054bb16",
2),S=function(b){var f=[];for(i=0;i<b.length;i++)f[b[i]]=i;return f}(J),T=x("01020408102040801b366cd8ab4d9a2f5ebc63c697356ad4b37dfaefc591",2),P=D(2),Q=D(3),O=D(9),M=D(11),N=D(13),L=D(14),R=function(){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=b.split("");"function"===typeof Array.indexOf&&(b=f);return{encode:function(b,e){var q=[],d="",p;totalChunks=Math.floor(16*b.length/3);for(p=0;p<16*b.length;p++)q.push(b[Math.floor(p/16)][p%16]);for(p=0;p<q.length;p+=3)d+=f[q[p]>>
2],d+=f[(q[p]&3)<<4|q[p+1]>>4],d=void 0!==q[p+1]?d+f[(q[p+1]&15)<<2|q[p+2]>>6]:d+"=",d=void 0!==q[p+2]?d+f[q[p+2]&63]:d+"=";q=d.slice(0,64);for(p=1;p<Math.ceil(d.length/64);p++)q+=d.slice(64*p,64*p+64)+(Math.ceil(d.length/64)==p+1?"":"\n");return q},decode:function(c){c=c.replace(/\n/g,"");var e=[],f=[],d=[],p;for(p=0;p<c.length;p+=4)f[0]=b.indexOf(c.charAt(p)),f[1]=b.indexOf(c.charAt(p+1)),f[2]=b.indexOf(c.charAt(p+2)),f[3]=b.indexOf(c.charAt(p+3)),d[0]=f[0]<<2|f[1]>>4,d[1]=(f[1]&15)<<4|f[2]>>2,
d[2]=(f[2]&3)<<6|f[3],e.push(d[0],d[1],d[2]);return e=e.slice(0,e.length-e.length%16)}}}();return{size:function(b){switch(b){case 128:v=10;s=4;break;case 192:v=12;s=6;break;case 256:v=14;s=8;break;default:throw"Invalid Key Size Specified:"+b;}},h2a:function(b){var f=[];b.replace(/(..)/g,function(b){f.push(parseInt(b,16))});return f},expandKey:G,encryptBlock:z,decryptBlock:E,Decrypt:w,s2a:t,rawEncrypt:m,rawDecrypt:K,dec:function(b,f,c){b=R.decode(b);var e=b.slice(8,16),e=d(t(f,c),e);f=e.key;e=e.iv;
b=b.slice(16,b.length);return b=K(b,f,e,c)},openSSLKey:d,a2h:function(b){var f="",c;for(c=0;c<b.length;c++)f+=(16>b[c]?"0":"")+b[c].toString(16);return f},enc:function(b,f,c){var e;e=[];var q;for(q=0;8>q;q++)e=e.concat(Math.floor(256*Math.random()));q=d(t(f,c),e);f=q.key;q=q.iv;e=[[83,97,108,116,101,100,95,95].concat(e)];b=t(b,c);b=m(b,f,q);b=e.concat(b);return R.encode(b)},Hash:{MD5:function(b){function f(b,c){var e,f,d,h,g;d=b&2147483648;h=c&2147483648;e=b&1073741824;f=c&1073741824;g=(b&1073741823)+
(c&1073741823);return e&f?g^2147483648^d^h:e|f?g&1073741824?g^3221225472^d^h:g^1073741824^d^h:g^d^h}function c(b,c,e,d,g,h,k){b=f(b,f(f(c&e|~c&d,g),k));return f(b<<h|b>>>32-h,c)}function e(b,c,e,d,h,g,k){b=f(b,f(f(c&d|e&~d,h),k));return f(b<<g|b>>>32-g,c)}function d(b,c,e,g,h,k,l){b=f(b,f(f(c^e^g,h),l));return f(b<<k|b>>>32-k,c)}function m(b,c,e,d,g,h,k){b=f(b,f(f(e^(c|~d),g),k));return f(b<<h|b>>>32-h,c)}function p(b){var c,e,d=[];for(e=0;3>=e;e++)c=b>>>8*e&255,d=d.concat(c);return d}var n=[],t,
s,y,K,h,g,k,l,r=x("67452301efcdab8998badcfe10325476d76aa478e8c7b756242070dbc1bdceeef57c0faf4787c62aa8304613fd469501698098d88b44f7afffff5bb1895cd7be6b901122fd987193a679438e49b40821f61e2562c040b340265e5a51e9b6c7aad62f105d02441453d8a1e681e7d3fbc821e1cde6c33707d6f4d50d87455a14eda9e3e905fcefa3f8676f02d98d2a4c8afffa39428771f6816d9d6122fde5380ca4beea444bdecfa9f6bb4b60bebfbc70289b7ec6eaa127fad4ef308504881d05d9d4d039e6db99e51fa27cf8c4ac5665f4292244432aff97ab9423a7fc93a039655b59c38f0ccc92ffeff47d85845dd16fa87e4ffe2ce6e0a30143144e0811a1f7537e82bd3af2352ad7d2bbeb86d391",
8),n=function(b){var c,e=b.length;c=e+8;for(var d=16*((c-c%64)/64+1),f=[],h=0,g=0;g<e;)c=(g-g%4)/4,h=8*(g%4),f[c]|=b[g]<<h,g++;c=(g-g%4)/4;f[c]|=128<<8*(g%4);f[d-2]=e<<3;f[d-1]=e>>>29;return f}(b);h=r[0];g=r[1];k=r[2];l=r[3];for(b=0;b<n.length;b+=16)t=h,s=g,y=k,K=l,h=c(h,g,k,l,n[b+0],7,r[4]),l=c(l,h,g,k,n[b+1],12,r[5]),k=c(k,l,h,g,n[b+2],17,r[6]),g=c(g,k,l,h,n[b+3],22,r[7]),h=c(h,g,k,l,n[b+4],7,r[8]),l=c(l,h,g,k,n[b+5],12,r[9]),k=c(k,l,h,g,n[b+6],17,r[10]),g=c(g,k,l,h,n[b+7],22,r[11]),h=c(h,g,k,l,
n[b+8],7,r[12]),l=c(l,h,g,k,n[b+9],12,r[13]),k=c(k,l,h,g,n[b+10],17,r[14]),g=c(g,k,l,h,n[b+11],22,r[15]),h=c(h,g,k,l,n[b+12],7,r[16]),l=c(l,h,g,k,n[b+13],12,r[17]),k=c(k,l,h,g,n[b+14],17,r[18]),g=c(g,k,l,h,n[b+15],22,r[19]),h=e(h,g,k,l,n[b+1],5,r[20]),l=e(l,h,g,k,n[b+6],9,r[21]),k=e(k,l,h,g,n[b+11],14,r[22]),g=e(g,k,l,h,n[b+0],20,r[23]),h=e(h,g,k,l,n[b+5],5,r[24]),l=e(l,h,g,k,n[b+10],9,r[25]),k=e(k,l,h,g,n[b+15],14,r[26]),g=e(g,k,l,h,n[b+4],20,r[27]),h=e(h,g,k,l,n[b+9],5,r[28]),l=e(l,h,g,k,n[b+14],
9,r[29]),k=e(k,l,h,g,n[b+3],14,r[30]),g=e(g,k,l,h,n[b+8],20,r[31]),h=e(h,g,k,l,n[b+13],5,r[32]),l=e(l,h,g,k,n[b+2],9,r[33]),k=e(k,l,h,g,n[b+7],14,r[34]),g=e(g,k,l,h,n[b+12],20,r[35]),h=d(h,g,k,l,n[b+5],4,r[36]),l=d(l,h,g,k,n[b+8],11,r[37]),k=d(k,l,h,g,n[b+11],16,r[38]),g=d(g,k,l,h,n[b+14],23,r[39]),h=d(h,g,k,l,n[b+1],4,r[40]),l=d(l,h,g,k,n[b+4],11,r[41]),k=d(k,l,h,g,n[b+7],16,r[42]),g=d(g,k,l,h,n[b+10],23,r[43]),h=d(h,g,k,l,n[b+13],4,r[44]),l=d(l,h,g,k,n[b+0],11,r[45]),k=d(k,l,h,g,n[b+3],16,r[46]),
g=d(g,k,l,h,n[b+6],23,r[47]),h=d(h,g,k,l,n[b+9],4,r[48]),l=d(l,h,g,k,n[b+12],11,r[49]),k=d(k,l,h,g,n[b+15],16,r[50]),g=d(g,k,l,h,n[b+2],23,r[51]),h=m(h,g,k,l,n[b+0],6,r[52]),l=m(l,h,g,k,n[b+7],10,r[53]),k=m(k,l,h,g,n[b+14],15,r[54]),g=m(g,k,l,h,n[b+5],21,r[55]),h=m(h,g,k,l,n[b+12],6,r[56]),l=m(l,h,g,k,n[b+3],10,r[57]),k=m(k,l,h,g,n[b+10],15,r[58]),g=m(g,k,l,h,n[b+1],21,r[59]),h=m(h,g,k,l,n[b+8],6,r[60]),l=m(l,h,g,k,n[b+15],10,r[61]),k=m(k,l,h,g,n[b+6],15,r[62]),g=m(g,k,l,h,n[b+13],21,r[63]),h=m(h,
g,k,l,n[b+4],6,r[64]),l=m(l,h,g,k,n[b+11],10,r[65]),k=m(k,l,h,g,n[b+2],15,r[66]),g=m(g,k,l,h,n[b+9],21,r[67]),h=f(h,t),g=f(g,s),k=f(k,y),l=f(l,K);return p(h).concat(p(g),p(k),p(l))}},Base64:R}}();
PUBNUB.secure=function(){function v(d){var m=w.s2a(JSON.stringify(d)),m=w.rawEncrypt(m,y,t);return w.Base64.encode(m)||d.data.message}function s(d,m){m=m?m:{};try{var s=w.Base64.decode(d),z=w.rawDecrypt(s,y,t,!1);return JSON.parse(z)}catch(v){return m.parse_error||null}}var w=PUBNUB.crypto;w.size(256);var y="",t=w.s2a("0123456789012345");return function(d){if(!("cipher_key"in d))throw"Missing 'cipher_key' in PUBNUB.secure({})";y=w.s2a(SHA256(d.cipher_key).slice(0,32));var m=PUBNUB.init(d);return{raw_encrypt:v,
raw_decrypt:s,ready:m.ready,time:PUBNUB.time,publish:function(d){d.message=v(d.message);return m.publish(d)},unsubscribe:function(d){return m.unsubscribe(d)},subscribe:function(d){var t=d.callback||d.message;d.callback=function(d,m,y,w){(d=s(d))&&t(d,m,y,w)};return m.subscribe(d)},history:function(d){var t="",y=d.callback;d.callback=function(d){t=d[0];var m=[];for(a=0;a<t.length;a++){var w=s(t[a],{parse_error:"DECRYPT_ERROR"});m.push(w)}y([m,d[1],d[2]])};m.history(d);return!0}}}}();
function SHA256(v){function s(s,t){var d=(s&65535)+(t&65535);return(s>>16)+(t>>16)+(d>>16)<<16|d&65535}function w(s,t){return s>>>t|s<<32-t}v=function(s){s=s.replace(/\r\n/g,"\n");for(var t="",d=0;d<s.length;d++){var m=s.charCodeAt(d);128>m?t+=String.fromCharCode(m):(127<m&&2048>m?t+=String.fromCharCode(m>>6|192):(t+=String.fromCharCode(m>>12|224),t+=String.fromCharCode(m>>6&63|128)),t+=String.fromCharCode(m&63|128))}return t}(v);return function(s){for(var t="",d=0;d<4*s.length;d++)t+="0123456789abcdef".charAt(s[d>>
2]>>8*(3-d%4)+4&15)+"0123456789abcdef".charAt(s[d>>2]>>8*(3-d%4)&15);return t}(function(y,t){var d=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,
2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],m=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],v=Array(64),z,E,F,I,A,C,B,G,H,x,D,J;y[t>>5]|=128<<24-t%32;y[(t+64>>9<<4)+15]=t;for(H=0;H<y.length;H+=16){z=m[0];E=m[1];F=m[2];I=m[3];
A=m[4];C=m[5];B=m[6];G=m[7];for(x=0;64>x;x++)v[x]=16>x?y[x+H]:s(s(s(w(v[x-2],17)^w(v[x-2],19)^v[x-2]>>>10,v[x-7]),w(v[x-15],7)^w(v[x-15],18)^v[x-15]>>>3),v[x-16]),D=s(s(s(s(G,w(A,6)^w(A,11)^w(A,25)),A&C^~A&B),d[x]),v[x]),J=s(w(z,2)^w(z,13)^w(z,22),z&E^z&F^E&F),G=B,B=C,C=A,A=s(I,D),I=F,F=E,E=z,z=s(D,J);m[0]=s(z,m[0]);m[1]=s(E,m[1]);m[2]=s(F,m[2]);m[3]=s(I,m[3]);m[4]=s(A,m[4]);m[5]=s(C,m[5]);m[6]=s(B,m[6]);m[7]=s(G,m[7])}return m}(function(s){for(var t=[],d=0;d<8*s.length;d+=8)t[d>>5]|=(s.charCodeAt(d/
8)&255)<<24-d%32;return t}(v),8*v.length))};
})();
