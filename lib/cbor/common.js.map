{"version":3,"sources":["cbor/common.js"],"names":["decode","base64ToBinary","_base64ToBinary","_decode","tokenString","padding","length","cleaned","replace","result","undefined"],"mappings":";;;;;;;;;;;;;;;;;;AAIE,oBAAYA,MAAZ,EAAkCC,cAAlC,EAA2E;AAAA;AAAA;AAAA;AACzE,SAAKC,eAAL,GAAuBD,cAAvB;AACA,SAAKE,OAAL,GAAeH,MAAf;AACD;;;;WAED,qBAAYI,WAAZ,EAAyB;AACvB,UAAIC,OAAO,GAAG,EAAd;;AAEA,UAAID,WAAW,CAACE,MAAZ,GAAqB,CAArB,KAA2B,CAA/B,EAAkC;AAChCD,QAAAA,OAAO,GAAG,GAAV;AACD,OAFD,MAEO,IAAID,WAAW,CAACE,MAAZ,GAAqB,CAArB,KAA2B,CAA/B,EAAkC;AACvCD,QAAAA,OAAO,GAAG,IAAV;AACD;;AAED,UAAME,OAAO,GAAGH,WAAW,CAACI,OAAZ,CAAoB,KAApB,EAA2B,GAA3B,EAAgCA,OAAhC,CAAwC,KAAxC,EAA+C,GAA/C,IAAsDH,OAAtE;;AACA,UAAMI,MAAM,GAAG,KAAKN,OAAL,CAAa,KAAKD,eAAL,CAAqBK,OAArB,CAAb,CAAf;;AAEA,UAAI,yBAAOE,MAAP,MAAkB,QAAtB,EAAgC;AAC9B,eAAOA,MAAP;AACD;;AAED,aAAOC,SAAP;AACD","sourcesContent":["export default class {\n  _base64ToBinary: (base64: string) => any;\n  _cborReader: { decode: (any) => Object };\n\n  constructor(decode: (any) => any, base64ToBinary: (base64: string) => any) {\n    this._base64ToBinary = base64ToBinary;\n    this._decode = decode;\n  }\n\n  decodeToken(tokenString) {\n    let padding = '';\n\n    if (tokenString.length % 4 === 3) {\n      padding = '=';\n    } else if (tokenString.length % 4 === 2) {\n      padding = '==';\n    }\n\n    const cleaned = tokenString.replace(/-/gi, '+').replace(/_/gi, '/') + padding;\n    const result = this._decode(this._base64ToBinary(cleaned));\n\n    if (typeof result === 'object') {\n      return result;\n    }\n\n    return undefined;\n  }\n}\n"],"file":"common.js"}