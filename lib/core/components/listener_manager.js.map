{"version":3,"sources":["core/components/listener_manager.js"],"names":["_listeners","newListeners","push","deprecatedListener","forEach","listener","announce","presence","status","message","signal","messageAction","file","objects","user","space","membership","networkStatus","category","categoryConstants","PNNetworkUpCategory","announceStatus","PNNetworkDownCategory"],"mappings":"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","sourcesContent":["/* @flow */\nimport {\n  MessageAnnouncement,\n  StatusAnnouncement,\n  SignalAnnouncement,\n  MessageActionAnnouncement,\n  ObjectAnnouncement,\n  CallbackStruct,\n  PresenceAnnouncement,\n  FileAnnouncement\n} from '../flow_interfaces';\nimport categoryConstants from '../constants/categories';\n\nexport default class {\n  _listeners: Array<CallbackStruct>;\n\n  constructor() {\n    this._listeners = [];\n  }\n\n  addListener(newListeners: CallbackStruct) {\n    this._listeners.push(newListeners);\n  }\n\n  removeListener(deprecatedListener: CallbackStruct) {\n    let newListeners = [];\n\n    this._listeners.forEach((listener) => {\n      if (listener !== deprecatedListener) newListeners.push(listener);\n    });\n\n    this._listeners = newListeners;\n  }\n\n  removeAllListeners() {\n    this._listeners = [];\n  }\n\n  announcePresence(announce: PresenceAnnouncement) {\n    this._listeners.forEach((listener) => {\n      if (listener.presence) listener.presence(announce);\n    });\n  }\n\n  announceStatus(announce: StatusAnnouncement) {\n    this._listeners.forEach((listener) => {\n      if (listener.status) listener.status(announce);\n    });\n  }\n\n  announceMessage(announce: MessageAnnouncement) {\n    this._listeners.forEach((listener) => {\n      if (listener.message) listener.message(announce);\n    });\n  }\n\n  announceSignal(announce: SignalAnnouncement) {\n    this._listeners.forEach((listener) => {\n      if (listener.signal) listener.signal(announce);\n    });\n  }\n\n  announceMessageAction(announce: MessageActionAnnouncement) {\n    this._listeners.forEach((listener) => {\n      if (listener.messageAction) listener.messageAction(announce);\n    });\n  }\n\n  announceFile(announce: FileAnnouncement) {\n    this._listeners.forEach((listener) => {\n      if (listener.file) listener.file(announce);\n    });\n  }\n\n  announceObjects(announce: ObjectAnnouncement) {\n    this._listeners.forEach((listener) => {\n      if (listener.objects) listener.objects(announce);\n    });\n  }\n\n  announceUser(announce: ObjectAnnouncement) {\n    this._listeners.forEach((listener) => {\n      if (listener.user) listener.user(announce);\n    });\n  }\n\n  announceSpace(announce: ObjectAnnouncement) {\n    this._listeners.forEach((listener) => {\n      if (listener.space) listener.space(announce);\n    });\n  }\n\n  announceMembership(announce: ObjectAnnouncement) {\n    this._listeners.forEach((listener) => {\n      if (listener.membership) listener.membership(announce);\n    });\n  }\n\n  announceNetworkUp() {\n    let networkStatus: StatusAnnouncement = {};\n    networkStatus.category = categoryConstants.PNNetworkUpCategory;\n    this.announceStatus(networkStatus);\n  }\n\n  announceNetworkDown() {\n    let networkStatus: StatusAnnouncement = {};\n    networkStatus.category = categoryConstants.PNNetworkDownCategory;\n    this.announceStatus(networkStatus);\n  }\n}\n"],"file":"listener_manager.js"}