{"version":3,"sources":["core/components/listener_manager.js"],"names":["_listeners","newListeners","push","deprecatedListener","forEach","listener","announce","presence","status","message","networkStatus","category","categoryConstants","PNNetworkUpCategory","announceStatus","PNNetworkDownCategory"],"mappings":";;;;;;;;AACA;;AACA;;;;;;;;;AAME,oBAAc;AAAA;;AACZ,SAAKA,UAAL,GAAkB,EAAlB;AACD;;;;gCAEWC,Y,EAA8B;AACxC,WAAKD,UAAL,CAAgBE,IAAhB,CAAqBD,YAArB;AACD;;;mCAEcE,kB,EAAoC;AACjD,UAAIF,eAAe,EAAnB;;AAEA,WAAKD,UAAL,CAAgBI,OAAhB,CAAwB,UAACC,QAAD,EAAc;AACpC,YAAIA,aAAaF,kBAAjB,EAAqCF,aAAaC,IAAb,CAAkBG,QAAlB;AACtC,OAFD;;AAIA,WAAKL,UAAL,GAAkBC,YAAlB;AACD;;;yCAEoB;AACnB,WAAKD,UAAL,GAAkB,EAAlB;AACD;;;qCAEgBM,Q,EAAgC;AAC/C,WAAKN,UAAL,CAAgBI,OAAhB,CAAwB,UAACC,QAAD,EAAc;AACpC,YAAIA,SAASE,QAAb,EAAuBF,SAASE,QAAT,CAAkBD,QAAlB;AACxB,OAFD;AAGD;;;mCAEcA,Q,EAA8B;AAC3C,WAAKN,UAAL,CAAgBI,OAAhB,CAAwB,UAACC,QAAD,EAAc;AACpC,YAAIA,SAASG,MAAb,EAAqBH,SAASG,MAAT,CAAgBF,QAAhB;AACtB,OAFD;AAGD;;;oCAEeA,Q,EAA+B;AAC7C,WAAKN,UAAL,CAAgBI,OAAhB,CAAwB,UAACC,QAAD,EAAc;AACpC,YAAIA,SAASI,OAAb,EAAsBJ,SAASI,OAAT,CAAiBH,QAAjB;AACvB,OAFD;AAGD;;;wCAEmB;AAClB,UAAII,gBAAoC,EAAxC;AACAA,oBAAcC,QAAd,GAAyBC,qBAAkBC,mBAA3C;AACA,WAAKC,cAAL,CAAoBJ,aAApB;AACD;;;0CAEqB;AACpB,UAAIA,gBAAoC,EAAxC;AACAA,oBAAcC,QAAd,GAAyBC,qBAAkBG,qBAA3C;AACA,WAAKD,cAAL,CAAoBJ,aAApB;AACD","file":"listener_manager.js","sourcesContent":["/* @flow */\r\nimport { MessageAnnouncement, StatusAnnouncement, CallbackStruct, PresenceAnnouncement } from '../flow_interfaces';\r\nimport categoryConstants from '../constants/categories';\r\n\r\nexport default class {\r\n\r\n  _listeners: Array<CallbackStruct>;\r\n\r\n  constructor() {\r\n    this._listeners = [];\r\n  }\r\n\r\n  addListener(newListeners: CallbackStruct) {\r\n    this._listeners.push(newListeners);\r\n  }\r\n\r\n  removeListener(deprecatedListener: CallbackStruct) {\r\n    let newListeners = [];\r\n\r\n    this._listeners.forEach((listener) => {\r\n      if (listener !== deprecatedListener) newListeners.push(listener);\r\n    });\r\n\r\n    this._listeners = newListeners;\r\n  }\r\n\r\n  removeAllListeners() {\r\n    this._listeners = [];\r\n  }\r\n\r\n  announcePresence(announce: PresenceAnnouncement) {\r\n    this._listeners.forEach((listener) => {\r\n      if (listener.presence) listener.presence(announce);\r\n    });\r\n  }\r\n\r\n  announceStatus(announce: StatusAnnouncement) {\r\n    this._listeners.forEach((listener) => {\r\n      if (listener.status) listener.status(announce);\r\n    });\r\n  }\r\n\r\n  announceMessage(announce: MessageAnnouncement) {\r\n    this._listeners.forEach((listener) => {\r\n      if (listener.message) listener.message(announce);\r\n    });\r\n  }\r\n\r\n  announceNetworkUp() {\r\n    let networkStatus: StatusAnnouncement = {};\r\n    networkStatus.category = categoryConstants.PNNetworkUpCategory;\r\n    this.announceStatus(networkStatus);\r\n  }\r\n\r\n  announceNetworkDown() {\r\n    let networkStatus: StatusAnnouncement = {};\r\n    networkStatus.category = categoryConstants.PNNetworkDownCategory;\r\n    this.announceStatus(networkStatus);\r\n  }\r\n\r\n}\r\n"]}