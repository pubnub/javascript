{"version":3,"sources":["core/endpoints/memberships/get_memberships.js"],"names":["getOperation","operationConstants","PNGetMembershipsOperation","validateParams","modules","incomingParams","userId","getURL","config","subscribeKey","utils","encodeString","getRequestTimeout","getTransactionTimeout","isAuthSupported","prepareParams","include","limit","page","filter","params","includes","totalCount","count","customFields","push","spaceFields","customSpaceFields","includesString","join","length","next","start","prev","end","handleResponse","membershipsResponse"],"mappings":";;;;;;;;;;;;;;;AAEA;;AAKA;;AACA;;AAEO,SAASA,YAAT,GAAgC;AACrC,SAAOC,uBAAmBC,yBAA1B;AACD;;AAEM,SAASC,cAAT,CAAwBC,OAAxB,EAAgDC,cAAhD,EAAkF;AACvF,MAAMC,MAAN,GAAiBD,cAAjB,CAAMC,MAAN;AAEA,MAAI,CAACA,MAAL,EAAa,OAAO,gBAAP;AACd;;AAEM,SAASC,MAAT,CACLH,OADK,EAELC,cAFK,EAGG;AACR,MAAMG,MAAN,GAAiBJ,OAAjB,CAAMI,MAAN;AAEA,+BAAsBA,MAAM,CAACC,YAA7B,oBAAmDC,kBAAMC,YAAN,CAAmBN,cAAc,CAACC,MAAlC,CAAnD;AACD;;AAEM,SAASM,iBAAT,OAAsD;AAAA,MAAzBJ,MAAyB,QAAzBA,MAAyB;AAC3D,SAAOA,MAAM,CAACK,qBAAP,EAAP;AACD;;AAEM,SAASC,eAAT,GAA2B;AAChC,SAAO,IAAP;AACD;;AAEM,SAASC,aAAT,CACLX,OADK,EAELC,cAFK,EAGG;AACR,MAAQW,OAAR,GAAyCX,cAAzC,CAAQW,OAAR;AAAA,MAAiBC,KAAjB,GAAyCZ,cAAzC,CAAiBY,KAAjB;AAAA,MAAwBC,IAAxB,GAAyCb,cAAzC,CAAwBa,IAAxB;AAAA,MAA8BC,MAA9B,GAAyCd,cAAzC,CAA8Bc,MAA9B;AACA,MAAMC,MAAM,GAAG,EAAf;;AAEA,MAAIH,KAAJ,EAAW;AACTG,IAAAA,MAAM,CAACH,KAAP,GAAeA,KAAf;AACD;;AAED,MAAID,OAAJ,EAAa;AACX,QAAIK,QAAQ,GAAG,EAAf;;AAEA,QAAIL,OAAO,CAACM,UAAZ,EAAwB;AACtBF,MAAAA,MAAM,CAACG,KAAP,GAAe,IAAf;AACD;;AAED,QAAIP,OAAO,CAACQ,YAAZ,EAA0B;AACxBH,MAAAA,QAAQ,CAACI,IAAT,CAAc,QAAd;AACD;;AAED,QAAIT,OAAO,CAACU,WAAZ,EAAyB;AACvBL,MAAAA,QAAQ,CAACI,IAAT,CAAc,OAAd;AACD;;AAED,QAAIT,OAAO,CAACW,iBAAZ,EAA+B;AAC7BN,MAAAA,QAAQ,CAACI,IAAT,CAAc,cAAd;AACD;;AAED,QAAIG,cAAc,GAAGP,QAAQ,CAACQ,IAAT,CAAc,GAAd,CAArB;;AAEA,QAAID,cAAc,CAACE,MAAf,GAAwB,CAA5B,EAA+B;AAC7BV,MAAAA,MAAM,CAACJ,OAAP,GAAiBY,cAAjB;AACD;AACF;;AAED,MAAIV,IAAJ,EAAU;AACR,QAAIA,IAAI,CAACa,IAAT,EAAe;AACbX,MAAAA,MAAM,CAACY,KAAP,GAAed,IAAI,CAACa,IAApB;AACD;;AACD,QAAIb,IAAI,CAACe,IAAT,EAAe;AACbb,MAAAA,MAAM,CAACc,GAAP,GAAahB,IAAI,CAACe,IAAlB;AACD;AACF;;AAED,MAAId,MAAJ,EAAY;AACVC,IAAAA,MAAM,CAACD,MAAP,GAAgBA,MAAhB;AACD;;AAED,SAAOC,MAAP;AACD;;AAEM,SAASe,cAAT,CACL/B,OADK,EAELgC,mBAFK,EAGoB;AACzB,SAAOA,mBAAP;AACD","sourcesContent":["/* @flow */\n\nimport {\n  MembershipsInput,\n  MembershipsListResponse,\n  ModulesInject,\n} from '../../flow_interfaces';\nimport operationConstants from '../../constants/operations';\nimport utils from '../../utils';\n\nexport function getOperation(): string {\n  return operationConstants.PNGetMembershipsOperation;\n}\n\nexport function validateParams(modules: ModulesInject, incomingParams: MembershipsInput) {\n  let { userId } = incomingParams;\n\n  if (!userId) return 'Missing userId';\n}\n\nexport function getURL(\n  modules: ModulesInject,\n  incomingParams: MembershipsInput\n): string {\n  let { config } = modules;\n\n  return `/v1/objects/${config.subscribeKey}/users/${utils.encodeString(incomingParams.userId)}/spaces`;\n}\n\nexport function getRequestTimeout({ config }: ModulesInject) {\n  return config.getTransactionTimeout();\n}\n\nexport function isAuthSupported() {\n  return true;\n}\n\nexport function prepareParams(\n  modules: ModulesInject,\n  incomingParams: MembershipsInput\n): Object {\n  const { include, limit, page, filter } = incomingParams;\n  const params = {};\n\n  if (limit) {\n    params.limit = limit;\n  }\n\n  if (include) {\n    let includes = [];\n\n    if (include.totalCount) {\n      params.count = true;\n    }\n\n    if (include.customFields) {\n      includes.push('custom');\n    }\n\n    if (include.spaceFields) {\n      includes.push('space');\n    }\n\n    if (include.customSpaceFields) {\n      includes.push('space.custom');\n    }\n\n    let includesString = includes.join(',');\n\n    if (includesString.length > 0) {\n      params.include = includesString;\n    }\n  }\n\n  if (page) {\n    if (page.next) {\n      params.start = page.next;\n    }\n    if (page.prev) {\n      params.end = page.prev;\n    }\n  }\n\n  if (filter) {\n    params.filter = filter;\n  }\n\n  return params;\n}\n\nexport function handleResponse(\n  modules: ModulesInject,\n  membershipsResponse: Object\n): MembershipsListResponse {\n  return membershipsResponse;\n}\n"],"file":"get_memberships.js"}