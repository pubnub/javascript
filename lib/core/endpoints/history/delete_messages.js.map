{"version":3,"sources":["core/endpoints/history/delete_messages.js"],"names":["getOperation","validateParams","useDelete","getURL","getRequestTimeout","isAuthSupported","prepareParams","handleResponse","PNDeleteMessagesOperation","modules","incomingParams","channel","config","subscribeKey","encodeString","getTransactionTimeout","start","end","outgoingParams","serverResponse","payload"],"mappings":";;;;;QAMgBA,Y,GAAAA,Y;QAIAC,c,GAAAA,c;QAQAC,S,GAAAA,S;QAIAC,M,GAAAA,M;QAOAC,iB,GAAAA,iB;QAIAC,e,GAAAA,e;QAIAC,a,GAAAA,a;QAWAC,c,GAAAA,c;;AA9ChB;;AACA;;;;AACA;;;;;;AAEO,SAASP,YAAT,GAAgC;AACrC,SAAO,qBAAmBQ,yBAA1B;AACD;;AAEM,SAASP,cAAT,CAAwBQ,OAAxB,EAAgDC,cAAhD,EAAuF;AAAA,MACtFC,OADsF,GAC1ED,cAD0E,CACtFC,OADsF;AAAA,MAEtFC,MAFsF,GAE3EH,OAF2E,CAEtFG,MAFsF;;;AAI5F,MAAI,CAACD,OAAL,EAAc,OAAO,iBAAP;AACd,MAAI,CAACC,OAAOC,YAAZ,EAA0B,OAAO,uBAAP;AAC3B;;AAEM,SAASX,SAAT,GAAqB;AAC1B,SAAO,IAAP;AACD;;AAEM,SAASC,MAAT,CAAgBM,OAAhB,EAAwCC,cAAxC,EAAuF;AAAA,MACtFC,OADsF,GAC1ED,cAD0E,CACtFC,OADsF;AAAA,MAEtFC,MAFsF,GAE3EH,OAF2E,CAEtFG,MAFsF;;;AAI5F,kCAA8BA,OAAOC,YAArC,iBAA6D,gBAAMC,YAAN,CAAmBH,OAAnB,CAA7D;AACD;;AAEM,SAASP,iBAAT,OAA+D;AAAA,MAAlCQ,MAAkC,QAAlCA,MAAkC;;AACpE,SAAOA,OAAOG,qBAAP,EAAP;AACD;;AAEM,SAASV,eAAT,GAAoC;AACzC,SAAO,IAAP;AACD;;AAEM,SAASC,aAAT,CAAuBG,OAAvB,EAA+CC,cAA/C,EAA8F;AAAA,MAC3FM,KAD2F,GAC5EN,cAD4E,CAC3FM,KAD2F;AAAA,MACpFC,GADoF,GAC5EP,cAD4E,CACpFO,GADoF;;;AAGnG,MAAIC,iBAAyB,EAA7B;;AAEA,MAAIF,KAAJ,EAAWE,eAAeF,KAAf,GAAuBA,KAAvB;AACX,MAAIC,GAAJ,EAASC,eAAeD,GAAf,GAAqBA,GAArB;;AAET,SAAOC,cAAP;AACD;;AAEM,SAASX,cAAT,CAAwBE,OAAxB,EAAgDU,cAAhD,EAAyF;AAC9F,SAAOA,eAAeC,OAAtB;AACD","file":"delete_messages.js","sourcesContent":["/* @flow */\n\nimport { FetchHistoryArguments, HistoryResponse, ModulesInject } from '../../flow_interfaces';\nimport operationConstants from '../../constants/operations';\nimport utils from '../../utils';\n\nexport function getOperation(): string {\n  return operationConstants.PNDeleteMessagesOperation;\n}\n\nexport function validateParams(modules: ModulesInject, incomingParams: FetchHistoryArguments) {\n  let { channel } = incomingParams;\n  let { config } = modules;\n\n  if (!channel) return 'Missing channel';\n  if (!config.subscribeKey) return 'Missing Subscribe Key';\n}\n\nexport function useDelete() {\n  return true;\n}\n\nexport function getURL(modules: ModulesInject, incomingParams: FetchHistoryArguments): string {\n  let { channel } = incomingParams;\n  let { config } = modules;\n\n  return `/v3/history/sub-key/${config.subscribeKey}/channel/${utils.encodeString(channel)}`;\n}\n\nexport function getRequestTimeout({ config }: ModulesInject): boolean {\n  return config.getTransactionTimeout();\n}\n\nexport function isAuthSupported(): boolean {\n  return true;\n}\n\nexport function prepareParams(modules: ModulesInject, incomingParams: FetchHistoryArguments): Object {\n  const { start, end } = incomingParams;\n\n  let outgoingParams: Object = {};\n\n  if (start) outgoingParams.start = start;\n  if (end) outgoingParams.end = end;\n\n  return outgoingParams;\n}\n\nexport function handleResponse(modules: ModulesInject, serverResponse: Object): HistoryResponse {\n  return serverResponse.payload;\n}\n"]}