{"version":3,"sources":["core/endpoints/history/delete_messages.js"],"names":["getOperation","operationConstants","PNDeleteMessagesOperation","validateParams","modules","incomingParams","channel","config","subscribeKey","useDelete","getURL","utils","encodeString","getRequestTimeout","getTransactionTimeout","isAuthSupported","prepareParams","start","end","outgoingParams","handleResponse","serverResponse","payload"],"mappings":";;;;;;;;;;;;;;;;AAEA;;AACA;;AACA;;AAEO,SAASA,YAAT,GAAgC;AACrC,SAAOC,uBAAmBC,yBAA1B;AACD;;AAEM,SAASC,cAAT,CAAwBC,OAAxB,EAAgDC,cAAhD,EAAuF;AAC5F,MAAMC,OAAN,GAAkBD,cAAlB,CAAMC,OAAN;AACA,MAAMC,MAAN,GAAiBH,OAAjB,CAAMG,MAAN;AAEA,MAAI,CAACD,OAAL,EAAc,OAAO,iBAAP;AACd,MAAI,CAACC,MAAM,CAACC,YAAZ,EAA0B,OAAO,uBAAP;AAC3B;;AAEM,SAASC,SAAT,GAAqB;AAC1B,SAAO,IAAP;AACD;;AAEM,SAASC,MAAT,CAAgBN,OAAhB,EAAwCC,cAAxC,EAAuF;AAC5F,MAAMC,OAAN,GAAkBD,cAAlB,CAAMC,OAAN;AACA,MAAMC,MAAN,GAAiBH,OAAjB,CAAMG,MAAN;AAEA,uCAA8BA,MAAM,CAACC,YAArC,sBAA6DG,kBAAMC,YAAN,CAAmBN,OAAnB,CAA7D;AACD;;AAEM,SAASO,iBAAT,OAA+D;AAAA,MAAlCN,MAAkC,QAAlCA,MAAkC;AACpE,SAAOA,MAAM,CAACO,qBAAP,EAAP;AACD;;AAEM,SAASC,eAAT,GAAoC;AACzC,SAAO,IAAP;AACD;;AAEM,SAASC,aAAT,CAAuBZ,OAAvB,EAA+CC,cAA/C,EAA8F;AACnG,MAAQY,KAAR,GAAuBZ,cAAvB,CAAQY,KAAR;AAAA,MAAeC,GAAf,GAAuBb,cAAvB,CAAea,GAAf;AAEA,MAAIC,cAAsB,GAAG,EAA7B;AAEA,MAAIF,KAAJ,EAAWE,cAAc,CAACF,KAAf,GAAuBA,KAAvB;AACX,MAAIC,GAAJ,EAASC,cAAc,CAACD,GAAf,GAAqBA,GAArB;AAET,SAAOC,cAAP;AACD;;AAEM,SAASC,cAAT,CAAwBhB,OAAxB,EAAgDiB,cAAhD,EAAyF;AAC9F,SAAOA,cAAc,CAACC,OAAtB;AACD","sourcesContent":["/* @flow */\n\nimport { FetchHistoryArguments, HistoryResponse, ModulesInject } from '../../flow_interfaces';\nimport operationConstants from '../../constants/operations';\nimport utils from '../../utils';\n\nexport function getOperation(): string {\n  return operationConstants.PNDeleteMessagesOperation;\n}\n\nexport function validateParams(modules: ModulesInject, incomingParams: FetchHistoryArguments) {\n  let { channel } = incomingParams;\n  let { config } = modules;\n\n  if (!channel) return 'Missing channel';\n  if (!config.subscribeKey) return 'Missing Subscribe Key';\n}\n\nexport function useDelete() {\n  return true;\n}\n\nexport function getURL(modules: ModulesInject, incomingParams: FetchHistoryArguments): string {\n  let { channel } = incomingParams;\n  let { config } = modules;\n\n  return `/v3/history/sub-key/${config.subscribeKey}/channel/${utils.encodeString(channel)}`;\n}\n\nexport function getRequestTimeout({ config }: ModulesInject): boolean {\n  return config.getTransactionTimeout();\n}\n\nexport function isAuthSupported(): boolean {\n  return true;\n}\n\nexport function prepareParams(modules: ModulesInject, incomingParams: FetchHistoryArguments): Object {\n  const { start, end } = incomingParams;\n\n  let outgoingParams: Object = {};\n\n  if (start) outgoingParams.start = start;\n  if (end) outgoingParams.end = end;\n\n  return outgoingParams;\n}\n\nexport function handleResponse(modules: ModulesInject, serverResponse: Object): HistoryResponse {\n  return serverResponse.payload;\n}\n"],"file":"delete_messages.js"}