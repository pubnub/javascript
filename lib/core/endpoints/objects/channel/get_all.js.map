{"version":3,"sources":["core/endpoints/objects/channel/get_all.js"],"names":["endpoint","getOperation","operationConstants","PNGetAllChannelMetadataOperation","validateParams","getURL","config","subscribeKey","getRequestTimeout","getTransactionTimeout","isAuthSupported","prepareParams","_modules","params","queryParams","include","customFields","totalCount","count","page","next","start","prev","end","filter","limit","sort","Object","entries","map","key","value","handleResponse","_","response","status","data"],"mappings":";;;;;;;;;;;AAGA;;AAyBA,IAAMA,QAAkF,GAAG;AACzFC,EAAAA,YAAY,EAAE;AAAA,WAAMC,uBAAmBC,gCAAzB;AAAA,GAD2E;AAIzFC,EAAAA,cAAc,EAAE,0BAAM,CAAE,CAJiE;AAMzFC,EAAAA,MAAM,EAAE;AAAA,QAAGC,MAAH,QAAGA,MAAH;AAAA,iCAA+BA,MAAM,CAACC,YAAtC;AAAA,GANiF;AAQzFC,EAAAA,iBAAiB,EAAE;AAAA,QAAGF,MAAH,SAAGA,MAAH;AAAA,WAAgBA,MAAM,CAACG,qBAAP,EAAhB;AAAA,GARsE;AAUzFC,EAAAA,eAAe,EAAE;AAAA,WAAM,IAAN;AAAA,GAVwE;AAYzFC,EAAAA,aAAa,EAAE,uBAACC,QAAD,EAAWC,MAAX,EAAsB;AAAA;;AACnC,QAAMC,WAAW,GAAG,EAApB;;AAEA,QAAID,MAAJ,aAAIA,MAAJ,kCAAIA,MAAM,CAAEE,OAAZ,4CAAI,gBAAiBC,YAArB,EAAmC;AACjCF,MAAAA,WAAW,CAACC,OAAZ,GAAsB,QAAtB;AACD;;AAED,QAAIF,MAAJ,aAAIA,MAAJ,mCAAIA,MAAM,CAAEE,OAAZ,6CAAI,iBAAiBE,UAArB,EAAiC;AAAA;;AAC/BH,MAAAA,WAAW,CAACI,KAAZ,uBAAoBL,MAAM,CAACE,OAA3B,qDAAoB,iBAAgBE,UAApC;AACD;;AAED,QAAIJ,MAAJ,aAAIA,MAAJ,+BAAIA,MAAM,CAAEM,IAAZ,yCAAI,aAAcC,IAAlB,EAAwB;AAAA;;AACtBN,MAAAA,WAAW,CAACO,KAAZ,oBAAoBR,MAAM,CAACM,IAA3B,kDAAoB,cAAaC,IAAjC;AACD;;AAED,QAAIP,MAAJ,aAAIA,MAAJ,gCAAIA,MAAM,CAAEM,IAAZ,0CAAI,cAAcG,IAAlB,EAAwB;AAAA;;AACtBR,MAAAA,WAAW,CAACS,GAAZ,oBAAkBV,MAAM,CAACM,IAAzB,kDAAkB,cAAaG,IAA/B;AACD;;AAED,QAAIT,MAAJ,aAAIA,MAAJ,eAAIA,MAAM,CAAEW,MAAZ,EAAoB;AAClBV,MAAAA,WAAW,CAACU,MAAZ,GAAqBX,MAAM,CAACW,MAA5B;AACD;;AAEDV,IAAAA,WAAW,CAACW,KAAZ,oBAAoBZ,MAApB,aAAoBA,MAApB,uBAAoBA,MAAM,CAAEY,KAA5B,yDAAqC,GAArC;;AAEA,QAAIZ,MAAJ,aAAIA,MAAJ,eAAIA,MAAM,CAAEa,IAAZ,EAAkB;AAAA;;AAChBZ,MAAAA,WAAW,CAACY,IAAZ,GAAmBC,MAAM,CAACC,OAAP,iBAAef,MAAM,CAACa,IAAtB,uDAA8B,EAA9B,EAAkCG,GAAlC,CAAsC,iBAAkB;AAAA;AAAA,YAAhBC,GAAgB;AAAA,YAAXC,KAAW;;AACzE,YAAIA,KAAK,KAAK,KAAV,IAAmBA,KAAK,KAAK,MAAjC,EAAyC;AACvC,2BAAUD,GAAV,cAAiBC,KAAjB;AACD,SAFD,MAEO;AACL,iBAAOD,GAAP;AACD;AACF,OANkB,CAAnB;AAOD;;AAED,WAAOhB,WAAP;AACD,GAhDwF;AAkDzFkB,EAAAA,cAAc,EAAE,wBAACC,CAAD,EAAIC,QAAJ;AAAA,WAA+C;AAC7DC,MAAAA,MAAM,EAAED,QAAQ,CAACC,MAD4C;AAE7DC,MAAAA,IAAI,EAAEF,QAAQ,CAACE,IAF8C;AAG7DnB,MAAAA,UAAU,EAAEiB,QAAQ,CAACjB,UAHwC;AAI7DK,MAAAA,IAAI,EAAEY,QAAQ,CAACZ,IAJ8C;AAK7DF,MAAAA,IAAI,EAAEc,QAAQ,CAACd;AAL8C,KAA/C;AAAA;AAlDyE,CAA3F;eA2DepB,Q","sourcesContent":["/** @flow */\n\nimport type { EndpointConfig } from '../../endpoint';\nimport operationConstants from '../../../constants/operations';\nimport type { ChannelMetadata } from './channel';\n\nexport type GetAllChannelMetadataParams = {|\n  filter?: string,\n  sort?: { [key: string]: 'asc' | 'desc' | null },\n  limit?: number,\n  page?: {|\n    next?: string,\n    prev?: string,\n  |},\n  include?: {|\n    totalCount?: boolean,\n    customFields?: boolean,\n  |},\n|};\n\nexport type GetAllChannelMetadataResult = {|\n  status: 200,\n  data: ChannelMetadata[],\n  totalCount?: number,\n  prev?: string,\n  next?: string,\n|};\n\nconst endpoint: EndpointConfig<GetAllChannelMetadataParams, GetAllChannelMetadataResult> = {\n  getOperation: () => operationConstants.PNGetAllChannelMetadataOperation,\n\n  // No required parameters.\n  validateParams: () => {},\n\n  getURL: ({ config }) => `/v2/objects/${config.subscribeKey}/channels`,\n\n  getRequestTimeout: ({ config }) => config.getTransactionTimeout(),\n\n  isAuthSupported: () => true,\n\n  prepareParams: (_modules, params) => {\n    const queryParams = {};\n\n    if (params?.include?.customFields) {\n      queryParams.include = 'custom';\n    }\n\n    if (params?.include?.totalCount) {\n      queryParams.count = params.include?.totalCount;\n    }\n\n    if (params?.page?.next) {\n      queryParams.start = params.page?.next;\n    }\n\n    if (params?.page?.prev) {\n      queryParams.end = params.page?.prev;\n    }\n\n    if (params?.filter) {\n      queryParams.filter = params.filter;\n    }\n\n    queryParams.limit = params?.limit ?? 100;\n\n    if (params?.sort) {\n      queryParams.sort = Object.entries(params.sort ?? {}).map(([key, value]) => {\n        if (value === 'asc' || value === 'desc') {\n          return `${key}:${value}`;\n        } else {\n          return key;\n        }\n      });\n    }\n\n    return queryParams;\n  },\n\n  handleResponse: (_, response): GetAllChannelMetadataResult => ({\n    status: response.status,\n    data: response.data,\n    totalCount: response.totalCount,\n    prev: response.prev,\n    next: response.next,\n  }),\n};\n\nexport default endpoint;\n"],"file":"get_all.js"}