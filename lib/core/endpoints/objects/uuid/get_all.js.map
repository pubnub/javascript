{"version":3,"sources":["core/endpoints/objects/uuid/get_all.js"],"names":["endpoint","getOperation","operationConstants","PNGetAllUUIDMetadataOperation","validateParams","getURL","config","subscribeKey","getRequestTimeout","getTransactionTimeout","isAuthSupported","prepareParams","_modules","params","queryParams","include","customFields","totalCount","count","page","next","start","prev","end","filter","limit","sort","Object","entries","map","key","value","handleResponse","_","response","status","data"],"mappings":";;;;;;;;;;;AAGA;;AAyBA,IAAMA,QAA4E,GAAG;AACnFC,EAAAA,YAAY,EAAE;AAAA,WAAMC,uBAAmBC,6BAAzB;AAAA,GADqE;AAInFC,EAAAA,cAAc,EAAE,0BAAM,CAAE,CAJ2D;AAMnFC,EAAAA,MAAM,EAAE;AAAA,QAAGC,MAAH,QAAGA,MAAH;AAAA,iCAA+BA,MAAM,CAACC,YAAtC;AAAA,GAN2E;AAQnFC,EAAAA,iBAAiB,EAAE;AAAA,QAAGF,MAAH,SAAGA,MAAH;AAAA,WAAgBA,MAAM,CAACG,qBAAP,EAAhB;AAAA,GARgE;AAUnFC,EAAAA,eAAe,EAAE;AAAA,WAAM,IAAN;AAAA,GAVkE;AAYnFC,EAAAA,aAAa,EAAE,uBAACC,QAAD,EAAWC,MAAX,EAAsB;AAAA;;AACnC,QAAMC,WAAW,GAAG,EAApB;;AAEA,QAAID,MAAJ,aAAIA,MAAJ,kCAAIA,MAAM,CAAEE,OAAZ,4CAAI,gBAAiBC,YAArB,EAAmC;AACjCF,MAAAA,WAAW,CAACC,OAAZ,GAAsB,QAAtB;AACD;;AAED,QAAIF,MAAJ,aAAIA,MAAJ,mCAAIA,MAAM,CAAEE,OAAZ,6CAAI,iBAAiBE,UAArB,EAAiC;AAAA;;AAC/BH,MAAAA,WAAW,CAACI,KAAZ,uBAAoBL,MAAM,CAACE,OAA3B,qDAAoB,iBAAgBE,UAApC;AACD;;AAED,QAAIJ,MAAJ,aAAIA,MAAJ,+BAAIA,MAAM,CAAEM,IAAZ,yCAAI,aAAcC,IAAlB,EAAwB;AAAA;;AACtBN,MAAAA,WAAW,CAACO,KAAZ,oBAAoBR,MAAM,CAACM,IAA3B,kDAAoB,cAAaC,IAAjC;AACD;;AAED,QAAIP,MAAJ,aAAIA,MAAJ,gCAAIA,MAAM,CAAEM,IAAZ,0CAAI,cAAcG,IAAlB,EAAwB;AAAA;;AACtBR,MAAAA,WAAW,CAACS,GAAZ,oBAAkBV,MAAM,CAACM,IAAzB,kDAAkB,cAAaG,IAA/B;AACD;;AAED,QAAIT,MAAJ,aAAIA,MAAJ,eAAIA,MAAM,CAAEW,MAAZ,EAAoB;AAClBV,MAAAA,WAAW,CAACU,MAAZ,GAAqBX,MAAM,CAACW,MAA5B;AACD;;AAEDV,IAAAA,WAAW,CAACW,KAAZ,oBAAoBZ,MAApB,aAAoBA,MAApB,uBAAoBA,MAAM,CAAEY,KAA5B,yDAAqC,GAArC;;AAEA,QAAIZ,MAAJ,aAAIA,MAAJ,eAAIA,MAAM,CAAEa,IAAZ,EAAkB;AAAA;;AAChBZ,MAAAA,WAAW,CAACY,IAAZ,GAAmBC,MAAM,CAACC,OAAP,iBAAef,MAAM,CAACa,IAAtB,uDAA8B,EAA9B,EAAkCG,GAAlC,CAAsC,iBAAkB;AAAA;AAAA,YAAhBC,GAAgB;AAAA,YAAXC,KAAW;;AACzE,YAAIA,KAAK,KAAK,KAAV,IAAmBA,KAAK,KAAK,MAAjC,EAAyC;AACvC,2BAAUD,GAAV,cAAiBC,KAAjB;AACD,SAFD,MAEO;AACL,iBAAOD,GAAP;AACD;AACF,OANkB,CAAnB;AAOD;;AAED,WAAOhB,WAAP;AACD,GAhDkF;AAkDnFkB,EAAAA,cAAc,EAAE,wBAACC,CAAD,EAAIC,QAAJ;AAAA,WAA4C;AAC1DC,MAAAA,MAAM,EAAED,QAAQ,CAACC,MADyC;AAE1DC,MAAAA,IAAI,EAAEF,QAAQ,CAACE,IAF2C;AAG1DnB,MAAAA,UAAU,EAAEiB,QAAQ,CAACjB,UAHqC;AAI1DG,MAAAA,IAAI,EAAEc,QAAQ,CAACd,IAJ2C;AAK1DE,MAAAA,IAAI,EAAEY,QAAQ,CAACZ;AAL2C,KAA5C;AAAA;AAlDmE,CAArF;eA2DetB,Q","sourcesContent":["/** @flow */\n\nimport type { EndpointConfig } from '../../endpoint';\nimport operationConstants from '../../../constants/operations';\nimport type { UUIDMetadata } from './uuid';\n\nexport type GetAllUUIDMetadataParams = {|\n  filter?: string,\n  sort?: { [key: string]: 'asc' | 'desc' | null },\n  limit?: number,\n  page?: {|\n    next?: string,\n    prev?: string,\n  |},\n  include?: {|\n    totalCount?: boolean,\n    customFields?: boolean,\n  |},\n|};\n\nexport type GetAllUUIDMetadataResult = {|\n  status: 200,\n  data: UUIDMetadata[],\n  totalCount?: number,\n  prev?: string,\n  next?: string,\n|};\n\nconst endpoint: EndpointConfig<GetAllUUIDMetadataParams, GetAllUUIDMetadataResult> = {\n  getOperation: () => operationConstants.PNGetAllUUIDMetadataOperation,\n\n  // No required parameters.\n  validateParams: () => {},\n\n  getURL: ({ config }) => `/v2/objects/${config.subscribeKey}/uuids`,\n\n  getRequestTimeout: ({ config }) => config.getTransactionTimeout(),\n\n  isAuthSupported: () => true,\n\n  prepareParams: (_modules, params) => {\n    const queryParams = {};\n\n    if (params?.include?.customFields) {\n      queryParams.include = 'custom';\n    }\n\n    if (params?.include?.totalCount) {\n      queryParams.count = params.include?.totalCount;\n    }\n\n    if (params?.page?.next) {\n      queryParams.start = params.page?.next;\n    }\n\n    if (params?.page?.prev) {\n      queryParams.end = params.page?.prev;\n    }\n\n    if (params?.filter) {\n      queryParams.filter = params.filter;\n    }\n\n    queryParams.limit = params?.limit ?? 100;\n\n    if (params?.sort) {\n      queryParams.sort = Object.entries(params.sort ?? {}).map(([key, value]) => {\n        if (value === 'asc' || value === 'desc') {\n          return `${key}:${value}`;\n        } else {\n          return key;\n        }\n      });\n    }\n\n    return queryParams;\n  },\n\n  handleResponse: (_, response): GetAllUUIDMetadataResult => ({\n    status: response.status,\n    data: response.data,\n    totalCount: response.totalCount,\n    next: response.next,\n    prev: response.prev,\n  }),\n};\n\nexport default endpoint;\n"],"file":"get_all.js"}