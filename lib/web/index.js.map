{"version":3,"sources":["web/index.js"],"names":[],"mappings":";;;;;;AAEA;;;;AACA;;;;AACA;;;;;;;;;;AAKA,IAAI,KAAK;AACP,KADO,eACH,GADG,EACU;AACf,WAAO,aAAa,OAAb,CAAqB,GAArB,CAAP;AACD,GAHM;AAKP,KALO,eAKH,GALG,EAKU,IALV,EAKqB;AAC1B,WAAO,aAAa,OAAb,CAAqB,GAArB,EAA0B,IAA1B,CAAP;AACD;AAPM,CAAT;;AAUA,SAAS,UAAT,CAAoB,GAApB,EAAiC;AAC/B,MAAI,aAAa,UAAU,UAA3B,EAAuC;AACrC,cAAU,UAAV,CAAqB,GAArB;AACD,GAFD,MAEO;AACL,WAAO,KAAP;AACD;AACF;;;;;AAKC,kBAAY,KAAZ,EAAwC;AAAA;;AACtC,UAAM,EAAN,GAAW,EAAX;AACA,UAAM,UAAN,GAAmB,UAAnB;AACA,UAAM,MAAN,GAAe;AACb,aAAO,mBAAmB,kBAAY;AADzB,KAAf;;AAHsC,0FAOhC,KAPgC;;AAUtC,WAAO,gBAAP,CAAwB,SAAxB,EAAmC,YAAM;AACvC,YAAK,gBAAL,CAAsB,mBAAtB;AACA,YAAK,IAAL,CAAU,IAAV;AACD,KAHD;;AAKA,WAAO,gBAAP,CAAwB,QAAxB,EAAkC,YAAM;AACtC,YAAK,gBAAL,CAAsB,iBAAtB;AACA,YAAK,SAAL,CAAe,IAAf;AACD,KAHD;AAfsC;AAmBvC","file":"web/index.js","sourcesContent":["/* @flow */\n\nimport PubNubCore from '../core/pubnub-common.js';\nimport packageJSON from '../../package.json';\nimport { InternalSetupStruct } from '../core/flow_interfaces';\n\n/**\n * LOCAL STORAGE\n */\nlet db = {\n  get(key: string) {\n    return localStorage.getItem(key);\n  },\n\n  set(key: string, data: any) {\n    return localStorage.setItem(key, data);\n  }\n};\n\nfunction sendBeacon(url: string) {\n  if (navigator && navigator.sendBeacon) {\n    navigator.sendBeacon(url);\n  } else {\n    return false;\n  }\n}\n\n\nexport default class extends PubNubCore {\n\n  constructor(setup: InternalSetupStruct) {\n    setup.db = db;\n    setup.sendBeacon = sendBeacon;\n    setup.params = {\n      pnsdk: 'PubNub-JS-Web/' + packageJSON.version\n    };\n\n    super(setup);\n\n    // mount network events.\n    window.addEventListener('offline', () => {\n      this._listenerManager.announceNetworkDown();\n      this.stop.bind(this);\n    });\n\n    window.addEventListener('online', () => {\n      this._listenerManager.announceNetworkUp();\n      this.reconnect.bind(this);\n    });\n  }\n\n}\n"],"sourceRoot":"/source/"}