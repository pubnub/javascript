// Version: 3.5.48
(function(){
window.JSON&&window.JSON.stringify||function(){function a(){try{return this.valueOf()}catch(b){return null}}function c(a){b.lastIndex=0;return b.test(a)?'"'+a.replace(b,function(b){var a=g[b];return"string"===typeof a?a:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function e(b,g){var l,t,q,n,m,s=d,k=g[b];k&&"object"===typeof k&&(k=a.call(k));"function"===typeof u&&(k=u.call(g,b,k));switch(typeof k){case "string":return c(k);case "number":return isFinite(k)?String(k):"null";
case "boolean":case "null":return String(k);case "object":if(!k)return"null";d+=x;m=[];if("[object Array]"===Object.prototype.toString.apply(k)){n=k.length;for(l=0;l<n;l+=1)m[l]=e(l,k)||"null";q=0===m.length?"[]":d?"[\n"+d+m.join(",\n"+d)+"\n"+s+"]":"["+m.join(",")+"]";d=s;return q}if(u&&"object"===typeof u)for(n=u.length,l=0;l<n;l+=1)t=u[l],"string"===typeof t&&(q=e(t,k))&&m.push(c(t)+(d?": ":":")+q);else for(t in k)Object.hasOwnProperty.call(k,t)&&(q=e(t,k))&&m.push(c(t)+(d?": ":":")+q);q=0===m.length?
"{}":d?"{\n"+d+m.join(",\n"+d)+"\n"+s+"}":"{"+m.join(",")+"}";d=s;return q}}window.JSON||(window.JSON={});var b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d,x,g={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},u;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,a,c){var g;x=d="";if("number"===typeof c)for(g=0;g<c;g+=1)x+=" ";else"string"===typeof c&&(x=c);if((u=a)&&"function"!==
typeof a&&("object"!==typeof a||"number"!==typeof a.length))throw Error("JSON.stringify");return e("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(b){return eval("("+b+")")})}();var da=1,w=!1,y=[],F="-pnpres",ea=10,fa=1E4,ga=310,ha=60,K=1E3,ia="/",ja="&",ka=/{([\w\-]+)}/g;function M(){return"x"+ ++da+""+ +new Date}function N(){return+new Date}
var P=function(){var a=Math.floor(20*Math.random());return function(c,e){return 0<c.indexOf("pubsub.")&&c.replace("pubsub","ps"+(e?O().split("-")[0]:20>++a?a:a=1))||c}}();function la(a,c){var e=a.join(ia),b=[];if(!c)return e;S(c,function(a,c){"undefined"!=typeof c&&null!=c&&0<encodeURIComponent(c).length&&b.push(a+"="+encodeURIComponent(c))});return e+="?"+b.join(ja)}function ma(a,c){function e(){d+c>N()?(clearTimeout(b),b=setTimeout(e,c)):(d=N(),a())}var b,d=0;return e}
function na(a,c){var e=[];S(a||[],function(b){c(b)&&e.push(b)});return e}function oa(a,c){return a.replace(ka,function(a,b){return c[b]||a})}function W(a,c){return setTimeout(a,c)}function O(a){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});a&&a(c);return c}
function S(a,c){if(a&&c)if("undefined"!=typeof a[0])for(var e=0,b=a.length;e<b;)c.call(a[e],a[e],e++);else for(e in a)a.hasOwnProperty&&a.hasOwnProperty(e)&&c.call(a[e],e,a[e])}function X(a,c){var e=[];S(a||[],function(b,a){e.push(c(b,a))});return e}function Y(a){var c=[];S(a,function(a,b){b.h&&c.push(a)});return c.sort()}function Z(){W(function(){w||(w=1,S(y,function(a){a()}))},K)}
function pa(a){function c(){}function e(z){if(Q){if(!v.length)return}else{z&&(v.g=0);if(v.g||!v.length)return;v.g=1}A(v.shift())}function b(z){var b=0;S(Y(D),function(a){if(a=D[a])b++,(z||function(){})(a)});return b}function d(){T()||g(1,{error:"Offline. Please check your network settings. "});setTimeout(d,K)}function x(){B.time(function(z){u(function(){},z);z||g(1,{error:"Heartbeat failed to connect to Pubnub Servers.Please check your network settings."});setTimeout(x,l)})}function g(z,a){H&&H(z,
a);H=null}function u(z,a){function b(a){a&&(U=N()-(a/1E4+(N()-c)/2),z&&z(U))}var c=N();a&&b(a)||B.time(b)}var L=+a.windowing||ea,R=(+a.timeout||ga)*K,l=(+a.keepalive||ha)*K,t=a.noleave||0,q=a.publish_key||"demo",n=a.subscribe_key||"demo",m=a.auth_key||"",s=a.secret_key||"",k=a.PNSDK||"",f=a.hmac_SHA256,p=a.ssl?"s":"",h="http"+p+"://"+(a.origin||"pubsub.pubnub.com"),G=P(h),$=P(h),v=[],U=0,aa=0,ba=0,H=0,V=0,I=0,D={},Q=a.no_wait_for_pending,A=a.xdr,r=a.error||function(){},T=a._is_online||function(){return 1},
E=a.jsonp_cb||function(){return 0},J=a.db||{get:function(){},set:function(){}},C=a.uuid||J&&J.get(n+"uuid")||"",B={LEAVE:function(a,b,c,f){var e={uuid:C,auth:m},d=P(h);c=c||function(){};var k=f||function(){};f=E();if(0<a.indexOf(F))return!0;if(t||!p||"0"==f)return!1;"0"!=f&&(e.callback=f);A({i:b||p,timeout:2E3,a:f,data:e,c:function(a){"object"==typeof a&&a.error?k(a):c(a)},b:k,url:[d,"v2","presence","sub_key",n,"channel",encodeURIComponent(a),"leave"]});return!0},history:function(a,b){b=a.callback||
b;var c=a.count||a.limit||100,f=a.reverse||"false",h=a.error||function(){},e=a.auth_key||m,d=a.channel,p=a.start,k=a.end,g={},q=E();if(!d)return r("Missing Channel");if(!b)return r("Missing Callback");if(!n)return r("Missing Subscribe Key");g.stringtoken="true";g.count=c;g.reverse=f;g.auth=e;q&&(g.callback=q);p&&(g.start=p);k&&(g.end=k);A({a:q,data:g,c:function(a){"object"==typeof a&&a.error?h(a):b(a)},b:h,url:[G,"v2","history","sub-key",n,"channel",encodeURIComponent(d)]})},replay:function(a,b){b=
b||a.callback||function(){};var c=a.auth_key||m,f=a.source,h=a.destination,e=a.stop,d=a.start,p=a.end,k=a.reverse,g=a.limit,v=E(),l={};if(!f)return r("Missing Source Channel");if(!h)return r("Missing Destination Channel");if(!q)return r("Missing Publish Key");if(!n)return r("Missing Subscribe Key");"0"!=v&&(l.callback=v);e&&(l.stop="all");k&&(l.reverse="true");d&&(l.start=d);p&&(l.end=p);g&&(l.count=g);l.auth=c;A({a:v,c:function(a){"object"==typeof a&&a.error?err(a):b(a)},b:function(){b([0,"Disconnected"])},
url:[G,"v1","replay",q,n,f,h],data:l})},auth:function(a){m=a;c()},time:function(a){var b=E();A({a:b,data:{uuid:C,auth:m},timeout:5*K,url:[G,"time",b],c:function(b){a(b[0])},b:function(){a(0)}})},publish:function(a,b){b=b||a.callback||function(){};var c=a.message,f=a.channel,h=a.auth_key||m,d=a.error||function(){},p=E(),k="push";a.prepend&&(k="unshift");if(!c)return r("Missing Message");if(!f)return r("Missing Channel");if(!q)return r("Missing Publish Key");if(!n)return r("Missing Subscribe Key");
c=JSON.stringify(c);v[k]({a:p,timeout:5*K,url:[G,"publish",q,n,0,encodeURIComponent(f),p,encodeURIComponent(c)],data:{uuid:C,auth:h},b:function(a){d(a);e(1)},c:function(a){"object"==typeof a&&a.error?d(a):b(a);e(1)}});e()},unsubscribe:function(a,b){var f=a.channel;b=b||a.callback||function(){};var h=a.error||function(){};I=0;V=1;f=X((f.join?f.join(","):""+f).split(","),function(a){if(D[a])return a+","+a+F}).join(",");S(f.split(","),function(a){var c=!0;a&&(w&&(c=B.LEAVE(a,0,b,h)),c||b({action:"leave"}),
D[a]=0)});c()},subscribe:function(a,f){function d(a){a?setTimeout(c,K):(G=P(h,1),$=P(h,1),W(function(){B.time(d)},K));b(function(b){if(a&&b.d)return b.d=0,b.k(b.name);a||b.d||(b.d=1,b.disconnect(b.name))})}function p(){var a=E(),f=Y(D).join(",");f&&(g(),H=A({timeout:qa,a:a,b:function(a){s(a);H=null;B.time(d)},data:{uuid:C,auth:k},url:[$,"subscribe",n,encodeURIComponent(f),a,I],c:function(a){H=null;if(!a||"object"==typeof a&&"error"in a&&a.error)return s(a),setTimeout(c,K);x(a[1]);I=!I&&V&&J.get(n)||
a[1];b(function(a){a.e||(a.e=1,a.j(a.name))});Q&&(I=1E4,Q=0);J.set(n,a[1]);var f=function(){var b=(2<a.length?a[2]:X(D,function(b){return X(Array(a[0].length).join(",").split(","),function(){return b})}).join(",")).split(",");return function(){var a=b.shift()||ba;return[(D[a]||{}).a||aa,a.split(F)[0]]}}(),h=N()-U-+a[1]/1E4;S(a[0],function(b){var c=f();c[0](b,a,c[1],h)});setTimeout(p,ca)}}))}var e=a.channel;f=(f=f||a.callback)||a.message;var k=a.auth_key||m,l=a.connect||function(){},q=a.reconnect||
function(){},v=a.disconnect||function(){},s=a.error||function(){},x=a.idle||function(){},t=a.presence||0,u=a.noheresync||0,Q=a.backfill||0,T=a.timetoken||0,qa=a.timeout||R,ca=a.windowing||L;V=a.restore;I=T;if(!e)return r("Missing Channel");if(!f)return r("Missing Callback");if(!n)return r("Missing Subscribe Key");S((e.join?e.join(","):""+e).split(","),function(a){var b=D[a]||{};D[ba=a]={name:a,e:b.e,d:b.d,h:1,a:aa=f,j:l,disconnect:v,k:q};t&&(B.subscribe({channel:a+F,callback:t}),b.h||u||B.here_now({channel:a,
callback:function(b){S("uuids"in b?b.uuids:[],function(c){t({action:"join",uuid:c,timestamp:N(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){g();setTimeout(p,ca)};if(!w)return y.push(c);c()},here_now:function(a,b){b=a.callback||b;var c=a.error||function(){},f=a.auth_key||m,h=a.channel,d=E(),f={uuid:C,auth:f};if(!h)return r("Missing Channel");if(!b)return r("Missing Callback");if(!n)return r("Missing Subscribe Key");"0"!=d&&(f.callback=d);A({a:d,data:f,c:function(a){"object"==typeof a&&a.error?
c(a):b(a)},b:c,url:[G,"v2","presence","sub_key",n,"channel",encodeURIComponent(h)]})},grant:function(a,b){b=a.callback||b;var c=a.error||function(){},h=a.channel,d=E(),e=a.ttl||-1,p=a.read?"1":"0",g=a.write?"1":"0",l=a.auth_key;if(!h)return r("Missing Channel");if(!b)return r("Missing Callback");if(!n)return r("Missing Subscribe Key");if(!q)return r("Missing Publish Key");if(!s)return r("Missing Secret Key");var v=Math.floor((new Date).getTime()/1E3),m=f(n+"\n"+q+"\ngrant\n"+(l&&0<encodeURIComponent(l).length?
"auth="+encodeURIComponent(l)+"&":"")+"channel="+encodeURIComponent(h)+"&pnsdk="+encodeURIComponent(k)+"&r="+p+"&timestamp="+encodeURIComponent(v)+(-1<e?"&ttl="+e:"")+"&w="+g,s),m=m.replace(/\+/g,"-"),m=m.replace(/\//g,"_"),h={w:g,r:p,signature:m,channel:encodeURIComponent(h),timestamp:v};"0"!=d&&(h.callback=d);-1<e&&(h.ttl=e);l&&(h.auth=encodeURIComponent(l));A({a:d,data:h,c:function(a){b(a)},b:c,url:[G,"v1","auth","grant","sub-key",n]})},audit:function(a,b){b=a.callback||b;var c=a.error||function(){},
h=a.channel,d=a.auth_key,e=E();if(!b)return r("Missing Callback");if(!n)return r("Missing Subscribe Key");if(!q)return r("Missing Publish Key");if(!s)return r("Missing Secret Key");var p=Math.floor((new Date).getTime()/1E3),g=n+"\n"+q+"\naudit\n";d&&(g+="auth="+encodeURIComponent(d)+"&");h&&(g+="channel="+encodeURIComponent(h)+"&");g+="pnsdk="+encodeURIComponent(k)+"&timestamp="+p;g=f(g,s);g=g.replace(/\+/g,"-");g=g.replace(/\//g,"_");p={signature:g,timestamp:p};"0"!=e&&(p.callback=e);h&&(p.channel=
encodeURIComponent(h));d&&(p.auth=encodeURIComponent(d));A({a:e,data:p,c:function(a){b(a)},b:c,url:[G,"v1","auth","audit","sub-key",n]})},revoke:function(a,b){a.read=!1;a.write=!1;B.grant(a,b)},set_uuid:function(a){C=a;c()},get_uuid:function(){return C},xdr:A,ready:Z,db:J,uuid:O,map:X,each:S,"each-channel":b,grep:na,offline:function(){g(1)},supplant:oa,now:N,unique:M,updater:ma};C||(C=B.uuid());J.set(n+"uuid",C);setTimeout(d,K);setTimeout(x,l);u();return B}
window.PUBNUB||function(){function a(f){XORIGN=0;var p=f.subscribe_key||"";f.uuid||m.get(p+"uuid");f.xdr=l;f.db=m;f.error=e;f._is_online=t;f.jsonp_cb=R;var h=pa(f);h.css=u;h.$=c;h.create=L;h.bind=d;h.head=x;h.search=b;h.attr=g;h.events=s;h.init=a;d("beforeunload",window,function(){h["each-channel"](function(a){h.LEAVE(a.name,1)});return!0});if(f.notest)return h;d("offline",window,h.offline);d("offline",document,h.offline);return h}function c(a){return document.getElementById(a)}function e(a){console.error(a)}
function b(a,b){var c=[];S(a.split(/\s+/),function(a){S((b||document).getElementsByTagName(a),function(a){c.push(a)})});return c}function d(a,b,c){S(a.split(","),function(a){function f(a){a||(a=window.event);c(a)||(a.cancelBubble=!0,a.returnValue=!1,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())}b.addEventListener?b.addEventListener(a,f,!1):b.attachEvent?b.attachEvent("on"+a,f):b["on"+a]=f})}function x(){return b("head")[0]}function g(a,b,c){if(c)a.setAttribute(b,c);
else return a&&a.getAttribute&&a.getAttribute(b)}function u(a,b){for(var c in b)if(b.hasOwnProperty(c))try{a.style[c]=b[c]+(0<"|width|height|top|left|".indexOf(c)&&"number"==typeof b[c]?"px":"")}catch(d){}}function L(a){return document.createElement(a)}function R(){return M()}function l(a){function b(a,f){l||(l=1,d.onerror=null,clearTimeout(m),a||!f||u(f),W(function(){a&&s();var b=c(k),d=b&&b.parentNode;d&&d.removeChild(b)},K))}var d=L("script"),e=a.a,k=M(),l=0,m=W(function(){b(1)},a.timeout||fa),
s=a.b||function(){},t=a.data||{},u=a.c||function(){};window[e]=function(a){b(0,a)};a.i||(d[q]=q);d.onerror=function(){b(1)};t.pnsdk=n;d.src=la(a.url,t);g(d,"id",k);x().appendChild(d);return b}function t(){return"onLine"in navigator?navigator.onLine:1}var q="async",n="PubNub-JS-SmartTV/3.5.48";window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||function(){});var m=function(){var a=window.localStorage;return{get:function(b){try{return a?
a.getItem(b):-1==document.cookie.indexOf(b)?null:((document.cookie||"").match(RegExp(b+"=([^;]+)"))||[])[1]||null}catch(c){}},set:function(b,c){try{if(a)return a.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(d){}}}}(),s={list:{},unbind:function(a){s.list[a]=[]},bind:function(a,b){(s.list[a]=s.list[a]||[]).push(b)},fire:function(a,b){S(s.list[a]||[],function(a){a(b)})}},k=c("pubnub")||0;d("load",window,function(){setTimeout(Z,0)});k=k||{};PUBNUB=a({notest:1,
publish_key:g(k,"pub-key"),subscribe_key:g(k,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==g(k,"ssl"),origin:g(k,"origin"),uuid:g(k,"uuid")})}();
(function(){var a=PUBNUB.ws=function(c,e){if(!(this instanceof a))return new a(c,e);var b=this;c=b.url=c||"";b.protocol=e||"Sec-WebSocket-Protocol";var d=c.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};b.CONNECTING=0;b.OPEN=1;b.CLOSING=2;b.CLOSED=3;b.CLOSE_NORMAL=1E3;b.CLOSE_GOING_AWAY=1001;b.CLOSE_PROTOCOL_ERROR=1002;b.CLOSE_UNSUPPORTED=1003;b.CLOSE_TOO_LARGE=1004;b.CLOSE_NO_STATUS=1005;b.CLOSE_ABNORMAL=1006;b.onclose=b.onerror=b.onmessage=b.onopen=
b.onsend=function(){};b.binaryType="";b.extensions="";b.bufferedAmount=0;b.trasnmitting=!1;b.buffer=[];b.readyState=b.CONNECTING;if(!c)return b.readyState=b.CLOSED,b.onclose({code:b.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!0}),b;b.f=PUBNUB.init(d);b.f.l=d;b.l=d;b.f.subscribe({restore:!1,channel:d.channel,disconnect:b.onerror,reconnect:b.onopen,error:function(){b.onclose({code:b.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!1})},callback:function(a){b.onmessage({data:a})},connect:function(){b.readyState=
b.OPEN;b.onopen()}})}})();
})();
